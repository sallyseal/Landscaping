{% extends 'plots/base.html' %}

{% block content %}

{% load static %}

<div class="w3-row w3-padding header1-dark">
  <div class="w3-half w3-container">
    <h4 class="header1-dark"><b>THE DATASET</b></h4>
    <p class="w3-large paragraph-d">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    <p class="w3-large paragraph-d">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum..</p>
  </div>
  <div class="w3-half w3-container">
    <img src="{% static 'plots/images/diff_trad.png' %}">
  </div>
</div>
<br>

<div class="w3-row w3-padding header1-light">
  <div class="w3-half w3-container">
    <!-- I want to split this in two horizontally and have 2 images in black and white -->
    <img src="{% static 'plots/images/moonlandscape.jpg' %}">
  </div>
  <div class="w3-half w3-container">
    <h4 class="header1-light"><b>FEATURE EXTRACTION & MUTUAL INFORMATION</b></h4>
    <p class="w3-large paragraph-l">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
    <p class="w3-large paragraph-l">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum..</p>
  </div>
</div>
<br>


  <!-- PLOTTING THE MI HEATMAP WITH GENE NAMES -->
<div class="w3-container w3_center">
  <div class="img-center" style="height: 900px; width: 1700px;" id="mi_heatmap"><!-- Plotly chart will be drawn inside this DIV -->
  </div>
</div>
  <script>
  var X = JSON.parse('{{ x | escapejs }}')
  var Y = JSON.parse('{{ y | escapejs }}')
  var Z = JSON.parse('{{ z | escapejs }}')
  var geneMap = JSON.parse('{{ gene_map | escapejs }}')

  var xvalues = X
  var yvalues = Y
  var zvalues = Z


// BEEN USING THIS ONE
  // var colorscaleValue = [
  // [0, '#B2DBD5'],
  // [1, '#003333']
  // ];


  var layout = {
    title: '<b>MUTUAL INFORMATION BETWEEN ALL POSSIBLE GENE PAIRS</b>',
    titlefont: {
      size: 20,
      color: '#011219'
    },
    margin: {
      l: 130,
      b: 130,
    }

  };

  var data = [ {
    x: xvalues,
    y: yvalues,
    z: zvalues,
    type: 'heatmap',
    colorscale: [[0, 'rgb(2,35,50)'], [0.14, 'rgb(3,84,93)'], [0.28, 'rgb(3,108,114)'], [0.42, 'rgb(39,148,115)'], [0.56, 'rgb(74,149,64)'], [0.7, 'rgb(145,192,60)'], [0.84, 'rgb(195,217,66)'], [1, 'rgb(245,241,72)']],
    // colorscale: colorscaleValue,
    // reversescale: true,
    showscale: true
  }
  ];
  var miHeatmap = document.getElementById('mi_heatmap');
  Plotly.plot('mi_heatmap', data, layout);

  mi_heatmap.on('plotly_click', function(data){
  var xGeneName = data.points[0].x;
  var yGeneName = data.points[0].y;
  window.location = '/plots/landscape?gene1=' + geneMap[xGeneName] + '&gene2=' + geneMap[yGeneName];
  })
  </script>

<div class="spacer">
</div>


    {% endblock %}
